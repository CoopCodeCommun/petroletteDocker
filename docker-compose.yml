services:
  petrolette:
    build: .
    labels:
      - "traefik.enable=true" 
      - "traefik.docker.network=frontend"
      - "traefik.http.routers.test_machine.tls.certresolver=myresolver"
      - "traefik.http.services.test_machine.loadbalancer.server.port=8000"
      - "traefik.http.routers.test_machine.rule=Host(`$DOMAIN`)"
    command: "npm start && echo 'ok' && tail -f /dev/null"